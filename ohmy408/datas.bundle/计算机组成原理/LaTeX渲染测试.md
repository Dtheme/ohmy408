# LaTeX渲染测试文档

## 问题分析

### 1. 下标渲染问题测试

#### 1.1 基本下标测试
- 简单下标：$x_1, x_2, x_3$
- 复杂下标：$x_{max}, x_{min}$

#### 1.2 中文下标测试（问题所在）
- 反码表示：$[+19]_{反} = 00010011$，$[-19]_{反} = 11101100$
- 补码表示：$[+19]_{补} = 00010011$，$[-19]_{补} = 11101101$
- 原码表示：$[+19]_{原} = 00010011$，$[-19]_{原} = 10010011$

### 2. 块级公式测试

#### 2.1 基本块级公式
$$x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$$

#### 2.2 中文下标块级公式（问题所在）
$[-19]_{补} = 11101101$

$$[-19]_{反} = 11101100$$

$$[+19]_{原} = 00010011$$

### 3. 英文下标对比测试

#### 3.1 英文下标（应该正常）
- $[+19]_{comp} = 00010011$
$[-19]_{comp} = 11101101$
- $[+19]_{inv} = 00010011$，$[-19]_{inv} = 11101100$
- $[+19]_{orig} = 00010011$，$[-19]_{orig} = 10010011$

#### 3.2 英文下标块级公式
$$[-19]_{comp} = 11101101$$

$$[-19]_{inv} = 11101100$$

### 4. 转义字符测试

#### 4.1 使用text命令
- $[+19]_{\text{反}} = 00010011$，$[-19]_{\text{反}} = 11101100$
- $[+19]_{\text{补}} = 00010011$，$[-19]_{\text{补}} = 11101101$

#### 4.2 使用mathrm命令
- $[+19]_{\mathrm{反}} = 00010011$，$[-19]_{\mathrm{反}} = 11101100$
- $[+19]_{\mathrm{补}} = 00010011$，$[-19]_{\mathrm{补}} = 11101101$

### 5. 复杂公式测试

#### 5.1 定点数运算
补码加法：$[A]_{补} + [B]_{补} = [A + B]_{补}$

补码减法：$[A]_{补} - [B]_{补} = [A]_{补} + [-B]_{补}$

#### 5.2 数制转换公式
$$N = a_n \cdot r^n + a_{n-1} \cdot r^{n-1} + \cdots + a_1 \cdot r^1 + a_0 \cdot r^0$$

$$[X]_{补} = \begin{cases}
X & \text{if } X \geq 0 \\
2^n + X & \text{if } X < 0
\end{cases}$$

### 6. 问题汇总

#### 6.1 预期问题
1. 中文字符在下标中无法正常渲染
2. 块级公式中的中文下标问题
3. 特殊字符处理不当

#### 6.2 解决方案测试
1. 使用`\text{}`包装中文字符
2. 使用`\mathrm{}`命令
3. 配置MathJax支持中文
4. 使用英文替代方案

### 7. 验证测试

#### 7.1 修复前后对比
**修复前（问题版本）：**
- $[+19]_{反} = 00010011$
- $[-19]_{反} = 11101100$
- $$[-19]_{补} = 11101101$$

**修复后（期望版本）：**
- $[+19]_{\text{反}} = 00010011$
- $[-19]_{\text{反}} = 11101100$
- $$[-19]_{\text{补}} = 11101101$$

#### 7.2 完整示例
> **例题**：用8位反码表示$+19_{10}$ 和$-19_{10}$。

**解析**：
```
+19₁₀：[+19]_{\text{反}} = [+19]_{\text{原}} = 00010011

-19₁₀：[-19]_{\text{原}} = 10010011
      数值位取反：01101100
      [-19]_{\text{反}} = 11101100
```

**答案**：$[+19]_{\text{反}} = 00010011$ ，$[-19]_{\text{反}} = 11101100$

### 8. 性能测试

#### 8.1 渲染时间测试
包含100个公式的渲染时间测试：

$f_1(x) = x^2 + 1$, $f_2(x) = x^3 + 2x$, $f_3(x) = \sin(x)$, $f_4(x) = \cos(x)$, $f_5(x) = \tan(x)$

#### 8.2 复杂度测试
$$\sum_{i=1}^{n} \sum_{j=1}^{m} \int_{-\infty}^{\infty} f_{i,j}(x) \, dx$$

$$\prod_{k=1}^{n} \left( \sum_{i=1}^{k} x_i \right)^{k!}$$

### 9. 兼容性测试

#### 9.1 不同浏览器兼容性
- Chrome: 测试结果
- Safari: 测试结果  
- Firefox: 测试结果

#### 9.2 不同设备兼容性
- iOS: 测试结果
- Android: 测试结果
- Desktop: 测试结果

### 10. 结论

通过本次测试，我们发现了以下问题和解决方案：

1. **问题根源**：MathJax默认不支持中文字符作为下标
2. **解决方案**：使用`\text{}`或`\mathrm{}`包装中文字符
3. **最佳实践**：建议在数学公式中使用英文缩写替代中文

**推荐写法**：
- 原码：$[x]_{orig}$ 或 $[x]_{\text{原}}$
- 反码：$[x]_{inv}$ 或 $[x]_{\text{反}}$
- 补码：$[x]_{comp}$ 或 $[x]_{\text{补}}$ 
